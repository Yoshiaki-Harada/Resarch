# 現実を想定したケーススタディ

本章では，より現実を想定したケーススタディを行い，手法I，手法IIの比較を行う．

## 概要

本章ではより現実を想定した状況を再現するため，2,3章より大規模な実験を行う．また様々な企業が存在することを想定し，手法Iには虚偽申告を行う企業を発生させる．手法IIにおいては耐戦略性を満たし，正直な申告が支配戦略となるので，虚偽申告を行う企業は発生しないものとする．提供企業数を変化させ，提供リソース量が多いケース，提供リソースと要求リソース量が同じケース，要求リソース量が多いケースについて実験を行う．実験条件を以下に示す．

+ リソースの種類:$|\boldsymbol{R}|=10$
+ 提供企業$|\boldsymbol{J}|=67,100,150$
  + 各企業2種類のリソースを遊休時間に提供する．
  + 遊休時間$TP_{i,r}$ [Ts]を[100, 200]で決定する．
  + コスト$c_{i,r}$は[2.0, 4.0] [円]とする．
+ 要求企業$|\boldsymbol{I}|=30$
  + 各企業$|\boldsymbol{N}|$=5個の入札を作成する．
  + $|\boldsymbol{R}|$種類のリソースを各 [0, 200] [Ts]要求する．
  + 予算$v_{j,n}$は合計要求時間と重み[3.0, 5.0]の積[円]とする．
+ 施行回数:10回
+ 手法Iの虚偽申告率:提供企業，要求企業はそれぞれ[0, 30]%虚偽申告を行う．



## Case1: 提供リソースと要求リソース量が同じケース

本節では，提供リソースと要求するリソース量が同じケースの計算機実験を行う．実験条件を以下に示す．

+ 提供企業$|\boldsymbol{J}|=100$
  + 提供リソースの時間:要求リソース時間=5:5
    + ただし要求または提供するリソース量は乱数を用いているので正確にこの比率になってはいない．またこの比率はリソースの合計時間の比率であり，各種類のリソースの比率が5:5になっているわけではない．

### 結果

[@tbl:total-profit]-[@tbl:requesters-total-profit]はそれぞれ，総利益，総提供企業利益，総要求企業利益を表す．[@tbl:requester-total-profit]と[@tbl:provider-total-profit]は，1提供企業あたりの利益，1要求企業あたりの利益を表す．それぞれの表のMethod1(truthful)は，手法Iにおいて，虚偽申告企業がいない場合(正直者のみ)の結果である．

|      | MethodI  | MethodII           | Method1(truthful) |
| ---- | -------- | ------------------ | ----------------- |
| AVE. | 38209.03 | 43851.34(15367.51) | 45291.11          |
| S.D. | 3554.65  | 3058.02            | 2717.13           |


:Total Profit {#tbl:total-profit}

|      | MethodI  | MethodII | Method1(truthful) |
| ---- | -------- | -------- | ----------------- |
| AVE. | 19512.30 | 18204.50 | 22645.55          |
| S.D. | 1646.21  | 2811.85  | 1358.57           |

:Total Providers Profit  {#tbl:providers-total-profit}

|      | Method1  | Method2  | Method1(truthful) |
| ---- | -------- | -------- | ----------------- |
| AVE. | 18696.73 | 10279.33 | 22645.55          |
| S.D. | 2154.17  | 1801.65  | 1358.57           |

:Total Requesters Profit {#tbl:requesters-total-profit}

|      | Method1 | Method2 | Method1(truthful) |
| ---- | ------- | ------- | ----------------- |
| AVE. | 195.12  | 182.05  | 226.46            |
| S.D. | 16.46   | 28.12   | 13.59             |

:Provider Profit {#tbl:provider-total-profit}

|      | Method1 | Method2 | Method1(truthful) |
| ---- | ------- | ------- | ----------------- |
| AVE. | 623.224 | 342.644 | 754.852           |
| S.D. | 71.806  | 60.055  | 45.286            |

:Requester Profit {#tbl:requester-total-profit}

### 考察

[@tbl:total-profit]において，手法Iの総利益は38209.03であり，手法I（正直者のみ）の総利益は45291.11となった．手法I（正直者のみ）はパレート効率な状態であるので，この結果から手法Iは虚偽申告によって正しくパレート効率な状態を導けないことがわかる．またその結果として，手法IIの総利益18204.50より低い結果となってしまった．

[@tbl:providers-total-profit]により総提供企業利益は，高いものから手法I（正直者のみ）は19512.30，手法Iは18204.50，手法IIは22645.55という結果となった．また[@tbl:requesters-total-profit]より総要求企業利益は，高いものから手法I（正直者のみ）は22645.55，手法Iは10279.33，手法IIは10279.33という結果となった．手法IIの総要求企業利益と総提供企業利益がともに手法I，手法I（正直者のみ）より低いのは手法IIには誰にも属さない余剰利益が発生してしまうからである．

また手法Iはお互いの取引価格の平均で取引を行うので，総提供企業利益と総要求企業は近い値，また正直者のケースは同じ値となっている．特に[@tbl:requesters-total-profit]において手法Iの両方の場合において．総提供企業利益が手法IIより高いのは，この総要求企業利益を少ない企業数で分配しているからと捉えることができる．手法IIの支払い決定アルゴリズムは，要求企業と平均をとる形になおらず，他の要求企業に支払いが依存しており，予算に対する要求企業数が多くなると，支払いが高くなり，利益が減少する傾向がある．

## Case2: 要求リソース量が多いケース

本節では，要求リソース量が多いケースの計算機実験を行う．実験条件を以下に示す．

+ 提供企業$|\boldsymbol{J}|=67$
  + 提供リソースの時間:要求リソース時間=4:6
    + ただし要求または提供するリソース量は乱数を用いているので正確にこの比率になってはいない．またこの比率はリソースの合計時間の比率であり，各種類のリソースがこの比率になっているわけではない．

### 結果

|      | MethodI  | MethodII           | Method1(truthful) |
| ---- | -------- | ------------------ | ----------------- |
| AVE. | 26447.98 | 29027.18(13434.71) | 31228.10          |
| S.D. | 2149.67  | 2504.18            | 2357.05           |

:Total profit {#tbl:total-profit-case2}

|      | MethodI  | MethodII | MethodI(truthful) |
| ---- | -------- | -------- | ----------------- |
| AVE. | 13645.77 | 11367.30 | 15614.05          |
| S.D. | 1417.11  | 1786.72  | 1178.53           |

:Total requesters profit {#tbl:total-profit-case2}

|      | MethodI  | MethodII | MethodI(truthful) |
| ---- | -------- | -------- | ----------------- |
| AVE. | 12802.20 | 4225.18  | 15614.05          |
| S.D. | 1000.88  | 1321.23  | 1178.53           |

:Total providers profit {#tbl:total-providers-profit-case2}

|      | MethodI | MethodII | MethodI(truthful) |
| ---- | ------- | -------- | ----------------- |
| AVE. | 203.67  | 169.66   | 233.05            |
| S.D. | 21.15   | 26.67    | 17.59             |

:Provider profit {#tbl:total-requesters-profit-case2}

|      | MethodI | MethodII | MethodI(truthful) |
| ---- | ------- | -------- | ----------------- |
| AVE. | 426.74  | 140.84   | 520.47            |
| S.D. | 33.36   | 44.04    | 39.28             |

:Requester profit {#tbl:requester-profit-case2}

### 考察

case1の結果と同様に[@tbl:total-profit-case2]より， 手法I，手法II，手法I(正直者のみ)の順で総利益が高い結果となった． [@tbl:total-profit]と[@tbl:total-profit-case2]を比較すると，どの場合においてもcase1の方が総利益が高い結果となった．case2は提供リソースが少ないので，満たせる要求が少なかったからだと考える．

[tbl:requesters-total-profit]と[tbl:requesters-total-profit-case2より総要求企業利益は，どの場合もcase1の方が高い結果となった．提供リソース量が少なく，要求が満たされなかったからだと考える．



## Case3: 提供リソース量が多いケース

本節では，提供リソース量が多いケースケースの計算機実験を行う．実験条件を以下に示す．

+ 提供企業$|\boldsymbol{J}|=150$
  + 提供リソースの時間:要求リソース時間=6:4
    + ただし要求または提供するリソース量は乱数を用いているので正確にこの比率になってはいない．またこの比率はリソースの合計時間の比率であり，各種類のリソースがこの比率になっているわけではない．

## 